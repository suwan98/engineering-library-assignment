# ê³µí•™ë„ì„œê´€ ë¯¸ë‹ˆê³¼ì œ

- í¬ì¼“ëª¬ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ê³ , ì‚¬ìš©ìê°€ ë¬´í•œìŠ¤í¬ë¡¤ì„ í†µí•´ ë‹¤ì–‘í•œ í¬ì¼“ëª¬ì„ íƒìƒ‰í•  ìˆ˜ ìˆìœ¼ë©°, íŠ¹ì • í¬ì¼“ëª¬ ìƒì„¸ ì •ë³´ í´ë¦­ì‹œ, ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ í•´ë‹¹ í¬ì¼“ëª¬ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

## ğŸ“‘ ê¸°ìˆ ìŠ¤íƒ

- TypeScript
- Nextjs
- Tanstack Query
- Emotion/MUI
- Axios

## í”„ë¡œì íŠ¸ ì…‹ì—…

### ë°ëª¨í˜ì´ì§€

- [Pokemon Card](https://engineering-library-assignment.vercel.app/)

### ë¡œì»¬í™˜ê²½

```bash

1. í”„ë¡œì íŠ¸ ë³µì‚¬

npx degit https://github.com/suwan98/engineering-library-assignment.git

/* OR */
git clone https://github.com/suwan98/engineering-library-assignment.git


2. í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜

pnpm install


3. í”„ë¡œì íŠ¸ ì‹¤í–‰

pnpm dev


```

## ğŸ‘¨â€ğŸ’» êµ¬í˜„ ëª©í‘œ

- [x] í˜ì´ì§€ ê¸°ë³¸ ë ˆì´ì•„ì›ƒ êµ¬í˜„
- [x] Pokemon APIë¥¼ í†µí•œ í¬ì¼“ëª¬ ë°ì´í„° ë Œë”ë§
- [x] ìš©ìì˜ ìŠ¤í¬ë¡¤ì„ ì¶”ì í•˜ì—¬ ë‚˜ì—´ëœ ëª©ë¡ì˜ ëì— ë„ë‹¬ì‹œ ì¶”ê°€ ì¡°íšŒ
- [x] ì¹´ë“œ í´ë¦­ ì‹œ, ìƒì„¸í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ë©°, í•´ë‹¹ í”„ë¡œë•íŠ¸ì— ëŒ€í•œ ìƒì„¸ë‚´ìš© ë Œë”ë§

## ğŸ“¦ í´ë”êµ¬ì¡°

ğŸ“¦src
â”£ ğŸ“‚app
â”ƒ â”£ ğŸ“‚fonts
â”ƒ â”ƒ â”£ ğŸ“œPretendard-Bold.woff2
â”ƒ â”ƒ â”£ ğŸ“œPretendard-Regular.woff2
â”ƒ â”ƒ â”— ğŸ“œPretendard-SemiBold.woff2
â”ƒ â”£ ğŸ“‚[detail]
â”ƒ â”ƒ â”— ğŸ“‚[slug]
â”ƒ â”ƒ â”ƒ â”— ğŸ“œpage.tsx
â”ƒ â”£ ğŸ“œerror.tsx
â”ƒ â”£ ğŸ“œfavicon.ico
â”ƒ â”£ ğŸ“œlayout.tsx
â”ƒ â”£ ğŸ“œloading.tsx
â”ƒ â”— ğŸ“œpage.tsx
â”£ ğŸ“‚components
â”ƒ â”£ ğŸ“‚common
â”ƒ â”ƒ â”£ ğŸ“œContainer.tsx
â”ƒ â”ƒ â”— ğŸ“œHeader.tsx
â”ƒ â”£ ğŸ“‚Detail
â”ƒ â”ƒ â”£ ğŸ“œPokemonPhysical.tsx
â”ƒ â”ƒ â”— ğŸ“œPokemonStats.tsx
â”ƒ â”— ğŸ“‚PokemonCards
â”ƒ â”ƒ â”£ ğŸ“œPokeCard.tsx
â”ƒ â”ƒ â”— ğŸ“œPokeCardList.tsx
â”£ ğŸ“‚constants
â”ƒ â”— ğŸ“œPOKE_BASE_URL.ts
â”£ ğŸ“‚hooks
â”ƒ â”£ ğŸ“œusePokemonDetail.tsx
â”£ ğŸ“‚provider
â”ƒ â”— ğŸ“œReactQueryProvider.tsx
â”£ ğŸ“‚service
â”ƒ â”— ğŸ“œfetchPokemonService.ts
â”— ğŸ“‚styles
â”ƒ â”— ğŸ“œglobalStyle.tsx

- `ğŸ“‚ [detail]` : nextjs 14ë²„ì „ í´ë”ê¸°ë°˜ ë¼ìš°íŒ…ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„¸í˜ì´ì§€ ì´ë™ê²½ë¡œë¥¼ /detail/slug(ì˜ˆì‹œ : /detail/dugtrio)ë¡œ ì´ë™í•˜ë„ë¡ í´ë”ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
- `ğŸ“œ error.tsx/loading.tsx` : ë§ˆì°¬ê°€ì§€ë¡œ nextjsëŠ” íŒŒì¼ê¸°ë°˜ ì—ëŸ¬í˜ì´ì§€/ë¡œë”©í˜ì´ì§€ uië¥¼ ì§€ì›í•˜ë¯€ë¡œ app ë””ë ‰í† ë¦¬ ë‚´ë¶€ì—ì„œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
- `ğŸ“‚components` : ì»´í¬ë„ŒíŠ¸ í´ë” ë‚´ë¶€ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” `common` í´ë”
  - ë””í…Œì¼ í˜ì´ì§€ì— ì‚¬ìš©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë‹´ì•„ë‘” `Detail` í´ë”
  - ë©”ì¸í˜ì´ì§€ì—ì„œ í¬ì¼“ëª¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•œ `ğŸ“‚PokemonCards` í´ë”ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
- `ğŸ“‚constants` : http í†µì‹ ì„ ìœ„í•œ pokeAPIì˜ ê¸°ë³¸ URLê³¼ ì¶”ê°€ì ìœ¼ë¡œ í¬ì¼“ëª¬ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ê¸° ìœ„í•œ ê¸°ë³¸ ì´ë¯¸ì§€ URLì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
- `ğŸ“‚hooks` : pokeAPI íŠ¹ì„±ìƒ, í•´ë‹¹ í¬ì¼“ëª¬ì— ëŒ€í•œ ìƒì„¸ì •ë³´ì— ì§„ì… ì‹œ ì¶”ê°€ì ìœ¼ë¡œ HTTP í†µì‹ ì´ í•„ìš”í•´, usePokemonDetailì´ë¼ëŠ” ì»¤ìŠ¤í…€í›…ì„ í†µí•´ í¬ì¼“ëª¬ì— ëŒ€í•œ ìƒì„¸ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
  - useReactQuery :
- `ğŸ“‚provider` : Tanstack-Queryë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  - TanStack Queryì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë° í•„ìš”í•œ Query Client ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ê³ , ì´ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì— ì œê³µí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- `ğŸ“‚service` : ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ë°˜ì ì¸ ë¹„ë™ê¸° í†µì‹  ë¡œì§ì„ ê°€ì§€ê³  ìˆëŠ” íŒŒì¼ì…ë‹ˆë‹¤.
  - í•´ë‹¹ íŒŒì¼ ë‚´ì—ì„œ ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„ì„ ìœ„í•œ í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬ ì¤€ë¹„/í¬ì¼“ëª¬ ì´ë¯¸ì§€ ì¶”ì¶œë“±ì— ê´€í•œ ë¡œì§ì´ í¬í•¨ë©ë‹ˆë‹¤.

## ğŸ˜€ í•µì‹¬ ê¸°ëŠ¥ ì„¤ëª…

### Tanstack Queryì˜ useInfinity Queryë¥¼ í†µí•œ ë¬´í•œìŠ¤í¬ë¡¤ êµ¬í˜„

**1. react-intersection-observer ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `useInView` hookê³¼ `useEffect`ë‚´ë¶€ ë¡œì§ì„ í†µí•´ ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤ ëì— ë‹¤ë‹¬ëì„ì‹œ, ì¶”ê°€ì ì¸ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ”ê¸° ìœ„í•´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.**

**2. `useInfiniteQuery`**

- `queryFn` : êµ¬ì„±í•œ service í´ë” ë‚´ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ë©°, pageParamì„ ì¸ìë¡œ ë°›ì•„ í•´ë‹¹ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.
- `initialPageParam` : ìµœì´ˆë¡œ ë Œë”ë§ í•  í˜ì´ì§€ ë²ˆí˜¸ì…ë‹ˆë‹¤.
- `getNextPageParam` : ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©í•  í˜ì´ì§€ íŒŒë¼ë¯¸í„°ë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” 5í˜ì´ì§€ê¹Œì§€ë§Œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ , ê·¸ ì´í›„ëŠ” `undefined`ë¥¼ ë°˜í™˜í•˜ì—¬ ë” ì´ìƒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.

```tsx
const {ref, inView} = useInView();

const {
  data: pokeomons,
  hasNextPage,
  fetchNextPage,
} = useInfiniteQuery({
  queryKey: ["pokemons"],
  initialPageParam: 1,
  queryFn: ({pageParam = 1}) => fetchPokemonService(pageParam),
  getNextPageParam: (_, pages) => {
    if (pages.length < 5) {
      return pages.length + 1;
    } else return undefined;
  },
});

useEffect(() => {
  if (inView && hasNextPage) {
    fetchNextPage();
  }
}, [fetchNextPage, hasNextPage, inView]);
```

**3. ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ì™€ í˜ì´ì§€ ë¡œë“œ**

- `useEffect` í›…ì„ ì‚¬ìš©í•˜ì—¬, ì‚¬ìš©ìê°€ ì„¤ì •í•œ ìš”ì†Œë¥¼ ë³´ê³  ìˆê³ (inView), ë‹¤ìŒ í˜ì´ì§€ê°€ ìˆë‹¤ë©´(hasNextPage), fetchNextPage í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë‹¤ìŒ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤

### íŠ¹ì • ì§‘ë‹¨ êµ°ì˜ ë‹¤ìˆ˜ ìë£Œ ë‚˜ì—´

![alt text](public/assets/README_IMAGE/main-image.png)

- ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë“¤ì´ `PokeCardList`ì™€ ë‚´ë¶€ `PokeCard` ì»´í¬ë„ŒíŠ¸ë¡œ ë Œë”ë§ë˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  - `PokeCardList`ëŠ” `grid`ë¥¼ í†µí•´ 3x3 í…Œì´ë¸”ë¡œ ë‚˜ëˆ„ì–´ì¡Œìœ¼ë©°,
  - `PokeCard`ëŠ” material uiì˜ Card ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì†ë°›ê³  í™•ì¥í•´ `Card`ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ìŠ¤íƒ€ì¼ë§ì„ í–ˆìŠµë‹ˆë‹¤.

```js
/* PokeCardList.tsx */
const PokeList = styled.ul`
  margin-top: 2rem;
  margin-bottom: 4rem;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: 1fr 1fr 1fr;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  cursor: pointer;
`;

/* PokeCard.tsx */
const PokeCardStyle = styled(Card)`
  max-width: 21rem;
  padding: 2rem;
  display: grid;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
`;

const PokeCardContent = styled(CardContent)`
  border-top: 1px solid rgb(30 41 59);
`;

const PokeCardTypography = styled(Typography)`
  text-transform: uppercase;
  text-align: center;
`;

const PokeCardButton = styled(Button)`
  background-color: rgb(148 163 184);

  &:hover {
    background-color: rgb(100 116 139);
  }
`;
```

### ìƒì„¸ í˜ì´ì§€ êµ¬í˜„

- ìƒì„¸í˜ì´ì§€ëŠ” `usePokemonDetail` ì»¤ìŠ¤í…€í›…ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ íŠ¹ì • í¬ì¼“ëª¬ í´ë¦­ì‹œ íŠ¹ì • í¬ì¼“ëª¬ì˜ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…ë˜ë©° (ì˜ˆì‹œ : http://localhost:3000/detail/weepinbell)
- í•´ë‹¹ ìƒì„¸í˜ì´ì§€ì—ëŠ” í¬ì¼“ëª¬ì˜ ì´ë¦„, ì‹ ì²´ì •ë³´, ìŠ¤íƒ¯ì •ë³´ë“±ì˜ uiê°€ í‘œì‹œë˜ì–´ìˆìŠµë‹ˆë‹¤.
  - ì‹ ì²´ì •ë³´ì™€ ìŠ¤í…Ÿì •ë³´ëŠ” ê°ê° PokemonPhysical/PokemonStats ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.
    ![alt text](public/assets/README_IMAGE/detail-image.png)
